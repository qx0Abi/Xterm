local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

-- Window Configuration
local Window = WindUI:CreateWindow({
    Title = "Wonka Hub",
    Author = "By qx0_",
    Folder = "WonkaHub",
    Icon = "hammer",
    IconSize = 28,
    NewElements = true,
    Size = UDim2.fromOffset(700, 700),
    HideSearchBar = true,
    Background = "rbxassetid://71675932420310",
    Transparent = true,
    Theme = "Midnight",
    
    OpenButton = {
        Title = "Open Wonka Hub",
        Icon = "hammer",
        CornerRadius = UDim.new(1, 0),
        StrokeThickness = 3,
        Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, Color3.fromRGB(170, 90, 255)),
            ColorSequenceKeypoint.new(1, Color3.fromRGB(120, 60, 255))
        }),
        Enabled = true,
        Draggable = true,
        OnlyMobile = false,
    },
    
    Topbar = {
        Height = 35,
        ButtonsType = "Default",
    }
})

-- Version Tag
Window:Tag({
    Title = "v2.5",
    Icon = "star",
    Color = Color3.fromRGB(170, 90, 255)
})

-- Color Palette
local Colors = {
    Purple = Color3.fromRGB(170, 90, 255),
    DarkPurple = Color3.fromRGB(120, 60, 255),
    Yellow = Color3.fromRGB(236, 162, 1),
    Green = Color3.fromRGB(16, 197, 80),
    Grey = Color3.fromRGB(131, 136, 158),
    Blue = Color3.fromRGB(37, 122, 247),
    Red = Color3.fromRGB(239, 79, 29),
    Cyan = Color3.fromRGB(0, 217, 255),
    Orange = Color3.fromRGB(255, 140, 0),
}

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- Variables
local infiniteJumpEnabled = false
local noClipEnabled = false
local espEnabled = false
local loopTpEnabled = false
local loopTpTarget = nil

-- Freecam Variables
local freecamEnabled = false
local freecamTarget = nil
local freecamConnection = nil
local originalCamera = nil

-- Forge Variables
local ex1Value = 0
local ex2Value = 1

-- Performance Variables
local render3DEnabled = true
local performanceMode = false
local lowQualityMode = false

-- Teleport Settings
local teleportMethod = "Instant"
local tweenSpeed = 50
local isTweening = false
local tempNoClipEnabled = false

-- ESP Variables
local espObjects = {}

-- Helper Functions
local function getCharacter()
    return LocalPlayer.Character
end

local function getHumanoid()
    local char = getCharacter()
    return char and char:FindFirstChild("Humanoid")
end

local function getRootPart()
    local char = getCharacter()
    return char and char:FindFirstChild("HumanoidRootPart")
end

-- Forge Functions
local function updateGoldDisplay(value)
    pcall(function()
        local gold = LocalPlayer:WaitForChild("PlayerGui")
                        :WaitForChild("Main")
                        .Screen:WaitForChild("Hud")
                        :WaitForChild("Gold")
        
        local label = gold:IsA("TextLabel") and gold
                    or gold:FindFirstChild("Text")
                    or gold:FindFirstChild("text")
        
        if label then
            local formatted = tostring(value):reverse():gsub("(%d%d%d)", "%1,"):reverse():gsub("^,", "")
            label.Text = "$" .. formatted
            WindUI:Notify({
                Title = "Exploit",
                Content = "" .. formatted,
                Icon = "bug",
            })
        end
    end)
end

local function updateLevelDisplay(value)
    pcall(function()
        local level = LocalPlayer:WaitForChild("PlayerGui")
                         :WaitForChild("Main")
                         .Screen:WaitForChild("Hud")
                         :WaitForChild("Level")
        
        local lvlLabel = level:IsA("TextLabel") and level
                       or level:FindFirstChild("Text")
                       or level:FindFirstChild("text")
        
        if lvlLabel then
            lvlLabel.Text = "Level " .. tostring(value)
            WindUI:Notify({
                Title = "Exploit",
                Content = "" .. tostring(value),
                Icon = "bug",
            })
        end
    end)
end

-- Performance Functions
local function toggle3DRendering(enabled)
    pcall(function()
        render3DEnabled = enabled
        RunService:Set3dRenderingEnabled(enabled)
        
        WindUI:Notify({
            Title = "3D Rendering",
            Content = enabled and "Enabled" or "Disabled - UI Only",
            Icon = enabled and "eye" or "eye-off",
        })
    end)
end

local function setLowQuality(enabled)
    pcall(function()
        local settings = UserSettings():GetService("UserGameSettings")
        local Lighting = game:GetService("Lighting")
        
        if enabled then
            settings.SavedQualityLevel = Enum.SavedQualitySetting.QualityLevel1
            settings.GraphicsQualityLevel = 1
            Lighting.GlobalShadows = false
            Lighting.FogEnd = 100
            Lighting.Brightness = 2
        else
            settings.SavedQualityLevel = Enum.SavedQualitySetting.Automatic
            Lighting.GlobalShadows = true
            Lighting.FogEnd = 100000
            Lighting.Brightness = 1
        end
        
        WindUI:Notify({
            Title = "Low Quality Mode",
            Content = enabled and "Enabled" or "Disabled",
            Icon = "zap",
        })
    end)
end

local function enablePerformanceMode(enabled)
    pcall(function()
        performanceMode = enabled
        
        for _, obj in pairs(Workspace:GetDescendants()) do
            if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Smoke") or obj:IsA("Fire") or obj:IsA("Sparkles") then
                obj.Enabled = not enabled
            end
            
            if enabled and obj:IsA("BasePart") then
                obj.Material = Enum.Material.SmoothPlastic
                obj.CastShadow = false
                obj.Reflectance = 0
            elseif obj:IsA("BasePart") then
                obj.CastShadow = true
            end
            
            if obj:IsA("Decal") or obj:IsA("Texture") then
                obj.Transparency = enabled and 1 or 0
            end
        end
        
        WindUI:Notify({
            Title = "Performance Mode",
            Content = enabled and "All effects disabled" or "Enabled",
            Icon = "zap",
        })
    end)
end

local function reduceDrawDistance(enabled)
    pcall(function()
        if enabled then
            Workspace.StreamingMinRadius = 32
            Workspace.StreamingTargetRadius = 64
        else
            Workspace.StreamingMinRadius = 64
            Workspace.StreamingTargetRadius = 1024
        end
    end)
end

-- ESP Functions
local function createESP(player)
    if player == LocalPlayer then return end
    
    pcall(function()
        local char = player.Character
        if not char then return end
        
        local hrp = char:FindFirstChild("HumanoidRootPart")
        if not hrp then return end
        
        local billboardGui = Instance.new("BillboardGui")
        billboardGui.Name = "ESP_" .. player.Name
        billboardGui.Adornee = hrp
        billboardGui.Size = UDim2.new(0, 100, 0, 50)
        billboardGui.StudsOffset = Vector3.new(0, 3, 0)
        billboardGui.AlwaysOnTop = true
        billboardGui.Parent = hrp
        
        local textLabel = Instance.new("TextLabel")
        textLabel.Size = UDim2.new(1, 0, 1, 0)
        textLabel.BackgroundTransparency = 1
        textLabel.Text = player.Name
        textLabel.TextColor3 = Color3.fromRGB(170, 90, 255)
        textLabel.TextStrokeTransparency = 0.5
        textLabel.TextScaled = true
        textLabel.Parent = billboardGui
        
        local highlight = Instance.new("Highlight")
        highlight.Name = "ESP_Highlight"
        highlight.Adornee = char
        highlight.FillColor = Color3.fromRGB(170, 90, 255)
        highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
        highlight.FillTransparency = 0.5
        highlight.OutlineTransparency = 0
        highlight.Parent = char
        
        espObjects[player.UserId] = {billboardGui, highlight}
    end)
end

local function removeESP(player)
    pcall(function()
        local objects = espObjects[player.UserId]
        if objects then
            for _, obj in pairs(objects) do
                if obj and obj.Parent then
                    obj:Destroy()
                end
            end
            espObjects[player.UserId] = nil
        end
    end)
end

local function toggleESP(enabled)
    espEnabled = enabled
    
    if enabled then
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer then
                createESP(player)
            end
        end
    else
        for _, player in pairs(Players:GetPlayers()) do
            removeESP(player)
        end
    end
end

-- Movement Functions
local noClipConnection = nil

local function toggleNoClip(enabled)
    noClipEnabled = enabled
    
    if enabled then
        noClipConnection = RunService.Stepped:Connect(function()
            if not noClipEnabled then return end
            
            local char = getCharacter()
            if not char then return end
            
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end)
    else
        if noClipConnection then
            noClipConnection:Disconnect()
            noClipConnection = nil
        end
    end
end

-- Teleport Function
local function teleportTo(targetCFrame, callback)
    local hrp = getRootPart()
    if not hrp then 
        WindUI:Notify({
            Title = "Error",
            Content = "Character not found",
            Icon = "alert-circle",
        })
        return 
    end
    
    if teleportMethod == "Instant" then
        hrp.CFrame = targetCFrame
        if callback then callback() end
    elseif teleportMethod == "Tween" then
        if isTweening then
            WindUI:Notify({
                Title = "Error",
                Content = "Already teleporting",
                Icon = "alert-circle",
            })
            return
        end
        
        isTweening = true
        
        if not noClipEnabled then
            tempNoClipEnabled = true
            toggleNoClip(true)
        end
        
        local distance = (targetCFrame.Position - hrp.Position).Magnitude
        local tweenTime = distance / tweenSpeed
        
        local tweenInfo = TweenInfo.new(
            tweenTime,
            Enum.EasingStyle.Linear,
            Enum.EasingDirection.InOut
        )
        
        local tween = TweenService:Create(hrp, tweenInfo, {CFrame = targetCFrame})
        
        tween.Completed:Connect(function()
            isTweening = false
            
            if tempNoClipEnabled then
                tempNoClipEnabled = false
                toggleNoClip(false)
            end
            
            if callback then callback() end
        end)
        
        tween:Play()
        
        WindUI:Notify({
            Title = "Teleporting",
            Content = string.format("%.0f studs (~%.1fs)", distance, tweenTime),
            Icon = "navigation",
        })
    end
end

-- Loop Teleport
local loopTpConnection = nil

local function startLoopTp()
    if loopTpConnection then return end
    
    loopTpConnection = RunService.Heartbeat:Connect(function()
        if not loopTpEnabled or not loopTpTarget then return end
        
        local targetPlayer = Players:FindFirstChild(loopTpTarget)
        if targetPlayer and targetPlayer.Character then
            local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
            local myHRP = getRootPart()
            
            if targetHRP and myHRP then
                myHRP.CFrame = targetHRP.CFrame + Vector3.new(0, 3, 0)
            end
        end
    end)
end

local function stopLoopTp()
    if loopTpConnection then
        loopTpConnection:Disconnect()
        loopTpConnection = nil
    end
end

-- Freecam Functions
local function startFreecam()
    if freecamConnection then return end
    
    local camera = Workspace.CurrentCamera
    originalCamera = camera.CameraType
    camera.CameraType = Enum.CameraType.Scriptable
    
    freecamConnection = RunService.RenderStepped:Connect(function()
        if not freecamEnabled or not freecamTarget then 
            return 
        end
        
        local targetPlayer = Players:FindFirstChild(freecamTarget)
        if targetPlayer and targetPlayer.Character then
            local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
            local targetHead = targetPlayer.Character:FindFirstChild("Head")
            
            if targetHRP and targetHead then
                -- Position camera behind and above the target
                local offset = Vector3.new(0, 8, 12)
                local targetPos = targetHead.Position
                local lookVector = targetHRP.CFrame.LookVector
                
                camera.CFrame = CFrame.new(targetPos - lookVector * offset.Z + Vector3.new(0, offset.Y, 0), targetPos)
            end
        end
    end)
end

local function stopFreecam()
    if freecamConnection then
        freecamConnection:Disconnect()
        freecamConnection = nil
    end
    
    local camera = Workspace.CurrentCamera
    if originalCamera then
        camera.CameraType = originalCamera
        originalCamera = nil
    else
        camera.CameraType = Enum.CameraType.Custom
    end
    
    -- Reset camera to player
    camera.CameraSubject = getCharacter() and getCharacter():FindFirstChild("Humanoid")
end

-- FOV Changer
local function setFOV(value)
    pcall(function()
        local camera = Workspace.CurrentCamera
        if camera then
            camera.FieldOfView = value
        end
    end)
end

-- Notification
WindUI:Notify({
    Title = "Wonka Hub Loaded",
    Content = "Welcome!",
    Icon = "check-circle",
})

-- ========================================
-- ðŸ“¦ CREATE SECTIONS
-- ========================================
local ForgeSection = Window:Section({
    Title = "âš’ï¸ The Forge",
})

local PlayerSection = Window:Section({
    Title = "ðŸŽ® Player Controls",
})

local TeleportSection = Window:Section({
    Title = "ðŸ“ Teleportation",
})

local VisualsSection = Window:Section({
    Title = "ðŸ‘ï¸ Visuals & ESP",
})

local PerformanceSection = Window:Section({
    Title = "âš¡ Performance",
})

local MiscSection = Window:Section({
    Title = "ðŸ”§ Utilities",
})

-- ========================================
-- âš’ï¸ FORGE TAB
-- ========================================
local ForgeTab = ForgeSection:Tab({
    Title = "The Forge",
    Icon = "hammer",
    IconColor = Colors.Orange,
    IconShape = "Square",
})

ForgeTab:Section({
    Title = "The Forge",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

local TFM = ForgeTab:Group({})

local ForgeTab = ForgeSection:Tab({
    Title = "Forge Exploits",
    Icon = "hammer",
    IconColor = Colors.Orange,
    IconShape = "Square",
})

ForgeTab:Section({
    Title = "Exploit Value",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

local ForgeTab = ForgeSection:Tab({
    Title = "The Forge Teleport",
    Icon = "hammer",
    IconColor = Colors.Orange,
    IconShape = "Square",
})

ForgeTab:Section({
    Title = "World 2 Locations",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

local TFGroup = ForgeTab:Group({})

local locations = {
    {Title = "Spawn", Icon = "home", CFrame = CFrame.new(0, 50, 0), Color = Colors.Grey},
    {Title = "The Forge", Icon = "hammer", CFrame = CFrame.new(13.35, 24.36, -69.49), Color = Colors.Orange},
    {Title = "Item Seller", Icon = "shopping-cart", CFrame = CFrame.new(-138.61, 21.61, -26.37), Color = Colors.Green},
    {Title = "Enchanter", Icon = "sparkles", CFrame = CFrame.new(21.76, 21.86, -126.00), Color = Colors.Purple},
    {Title = "Runemaker", Icon = "book", CFrame = CFrame.new(-55.48, 21.76, -141.15), Color = Colors.Blue},
    {Title = "Mine", Icon = "pickaxe", CFrame = CFrame.new(202.43, 75.00, -203.33), Color = Colors.Yellow},
    {Title = "Volcano Start", Icon = "flame", CFrame = CFrame.new(351.68, 89.53, 72.32), Color = Colors.Red},
    {Title = "Update Gate", Icon = "door-open", CFrame = CFrame.new(405.98, 49.04, 290.94), Color = Colors.Cyan},
    {Title = "Demonic Pick", Icon = "skull", CFrame = CFrame.new(647.18, 53.84, 270.52), Color = Colors.Red},
}

for i, loc in ipairs(locations) do
    local TFGroup = ForgeTab:Group({})
    
    TFGroup:Button({
        Title = loc.Title,
        Icon = loc.Icon,
        Justify = "Center",
        Color = loc.Color,
        Callback = function()
            teleportTo(loc.CFrame, function()
                WindUI:Notify({
                    Title = "Teleported",
                    Content = "To " .. loc.Title,
                    Icon = loc.Icon,
                })
            end)
        end
    })
    
    if i ~= #locations then
        ForgeTab:Space()
    end
end

ForgeTab:Space()

-- ========================================
-- ðŸŽ® PLAYER TAB
-- ========================================
local PlayerTab = PlayerSection:Tab({
    Title = "Player",
    Icon = "user",
    IconColor = Colors.Green,
    IconShape = "Square",
})

PlayerTab:Section({
    Title = "ðŸƒ Movement Speed",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

PlayerTab:Input({
    Title = "Walk Speed",
    Value = "16",
    InputIcon = "gauge",
    Type = "Input",
    Placeholder = "16 - 500",
    Callback = function(text)
        local num = tonumber(text)
        if num and num >= 16 and num <= 500 then
            local humanoid = getHumanoid()
            if humanoid then
                humanoid.WalkSpeed = num
                WindUI:Notify({
                    Title = "Walk Speed",
                    Content = "Set to " .. num,
                    Icon = "check",
                })
            end
        end
    end,
})

PlayerTab:Space()

PlayerTab:Input({
    Title = "Jump Power",
    Value = "50",
    InputIcon = "arrow-up",
    Type = "Input",
    Placeholder = "50 - 500",
    Callback = function(text)
        local num = tonumber(text)
        if num and num >= 50 and num <= 500 then
            local humanoid = getHumanoid()
            if humanoid then
                humanoid.JumpPower = num
                WindUI:Notify({
                    Title = "Jump Power",
                    Content = "Set to " .. num,
                    Icon = "check",
                })
            end
        end
    end,
})

PlayerTab:Space()

PlayerTab:Section({
    Title = "âœ¨ Movement Features",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

local MovementGroup = PlayerTab:Group({})

MovementGroup:Toggle({
    Title = "Infinite Jump",
    Desc = "Jump infinitely in the air",
    Callback = function(state)
        infiniteJumpEnabled = state
        WindUI:Notify({
            Title = "Infinite Jump",
            Content = state and "Enabled" or "Disabled",
            Icon = state and "check" or "x",
        })
    end
})

MovementGroup:Space()

MovementGroup:Toggle({
    Title = "NoClip",
    Desc = "Walk through walls and objects",
    Callback = function(state)
        toggleNoClip(state)
        WindUI:Notify({
            Title = "NoClip",
            Content = state and "Enabled" or "Disabled",
            Icon = state and "check" or "x",
        })
    end
})

-- ========================================
-- ðŸ“ TELEPORT TAB
-- ========================================
local TeleportTab = TeleportSection:Tab({
    Title = "Teleport",
    Icon = "map-pin",
    IconColor = Colors.Blue,
    IconShape = "Square",
})

TeleportTab:Section({
    Title = "ðŸ‘¥ Player Teleportation",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

local playerNames = {}
local selectedPlayer = nil

local function updatePlayerList()
    playerNames = {}
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(playerNames, player.Name)
        end
    end
    return playerNames
end

updatePlayerList()

local PlayerTpGroup = TeleportTab:Group({})

local AllPlayersDropdown = PlayerTpGroup:Dropdown({
    Title = "Select Player",
    Desc = "Choose a player to teleport to",
    Values = playerNames,
    Value = playerNames[1],
    Callback = function(val)
        selectedPlayer = val
        loopTpTarget = val
    end
})

PlayerTpGroup:Space()

PlayerTpGroup:Button({
    Title = "Refresh Player List",
    Icon = "refresh-cw",
    Justify = "Center",
    Color = Colors.Grey,
    Callback = function()
        playerNames = updatePlayerList()
        AllPlayersDropdown:Refresh(playerNames)
        WindUI:Notify({
            Title = "Player List",
            Content = "Refreshed successfully",
            Icon = "check",
        })
    end
})

TeleportTab:Space()

local TpActionsGroup = TeleportTab:Group({})

TpActionsGroup:Button({
    Title = "Teleport to Player",
    Icon = "send",
    Justify = "Center",
    Color = Colors.Blue,
    Callback = function()
        if not selectedPlayer then
            WindUI:Notify({
                Title = "Error",
                Content = "No player selected",
                Icon = "alert-circle",
            })
            return
        end
        
        local targetPlayer = Players:FindFirstChild(selectedPlayer)
        if targetPlayer and targetPlayer.Character then
            local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
            
            if targetHRP then
                teleportTo(targetHRP.CFrame, function()
                    WindUI:Notify({
                        Title = "Teleported",
                        Content = "To " .. selectedPlayer,
                        Icon = "check",
                    })
                end)
            end
        end
    end
})

TpActionsGroup:Space()

TpActionsGroup:Toggle({
    Title = "Loop Teleport",
    Desc = "Continuously teleport to selected player",
    Callback = function(state)
        loopTpEnabled = state
        if state then
            startLoopTp()
            WindUI:Notify({
                Title = "Loop Teleport",
                Content = "Enabled for " .. (selectedPlayer or "no player"),
                Icon = "repeat",
            })
        else
            stopLoopTp()
            WindUI:Notify({
                Title = "Loop Teleport",
                Content = "Disabled",
                Icon = "x",
            })
        end
    end
})

TeleportTab:Space()

TeleportTab:Section({
    Title = "ðŸ“¹ Freecam Spectate",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

local FreecamGroup = TeleportTab:Group({})

local FreecamDropdown = FreecamGroup:Dropdown({
    Title = "Select Player to Spectate",
    Desc = "Choose a player to follow with freecam",
    Values = playerNames,
    Value = playerNames[1],
    Callback = function(val)
        freecamTarget = val
        if freecamEnabled then
            WindUI:Notify({
                Title = "Spectating",
                Content = val,
                Icon = "video",
            })
        end
    end
})

FreecamGroup:Space()

FreecamGroup:Button({
    Title = "Refresh Spectate List",
    Icon = "refresh-cw",
    Justify = "Center",
    Color = Colors.Cyan,
    Callback = function()
        playerNames = updatePlayerList()
        FreecamDropdown:Refresh(playerNames)
        WindUI:Notify({
            Title = "Spectate List",
            Content = "Refreshed successfully",
            Icon = "check",
        })
    end
})

TeleportTab:Space()

local FreecamToggleGroup = TeleportTab:Group({})

FreecamToggleGroup:Toggle({
    Title = "Enable Freecam Spectate",
    Desc = "Follow selected player with freecam",
    Callback = function(state)
        freecamEnabled = state
        if state then
            if not freecamTarget then
                WindUI:Notify({
                    Title = "Error",
                    Content = "No player selected to spectate",
                    Icon = "alert-circle",
                })
                freecamEnabled = false
                return
            end
            startFreecam()
            WindUI:Notify({
                Title = "Freecam Enabled",
                Content = "Spectating " .. freecamTarget,
                Icon = "video",
            })
        else
            stopFreecam()
            WindUI:Notify({
                Title = "Freecam Disabled",
                Content = "Camera returned to normal",
                Icon = "x",
            })
        end
    end
})

TeleportTab:Space()

TeleportTab:Section({
    Title = "âš¡ Quick Movement",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

local QuickMoveGroup = TeleportTab:Group({})

QuickMoveGroup:Button({
    Title = "Up (+100)",
    Icon = "arrow-up-circle",
    Callback = function()
        local hrp = getRootPart()
        if hrp then 
            teleportTo(hrp.CFrame + Vector3.new(0, 100, 0))
            WindUI:Notify({
                Title = "Moved Up",
                Content = "+100 studs",
                Icon = "arrow-up",
            })
        end
    end
})

QuickMoveGroup:Space()

QuickMoveGroup:Button({
    Title = "Down (-100)",
    Icon = "arrow-down-circle",
    Callback = function()
        local hrp = getRootPart()
        if hrp then 
            teleportTo(hrp.CFrame - Vector3.new(0, 100, 0))
            WindUI:Notify({
                Title = "Moved Down",
                Content = "-100 studs",
                Icon = "arrow-down",
            })
        end
    end
})

TeleportTab:Space()

local HorizontalGroup = TeleportTab:Group({})

HorizontalGroup:Button({
    Title = "Forward (+50)",
    Icon = "arrow-right-circle",
    Callback = function()
        local hrp = getRootPart()
        if not hrp then return end
        local forward = hrp.CFrame.LookVector * 50
        teleportTo(hrp.CFrame + forward)
        WindUI:Notify({
            Title = "Moved Forward",
            Content = "+50 studs",
            Icon = "arrow-right",
        })
    end
})

HorizontalGroup:Space()

HorizontalGroup:Button({
    Title = "Backward (-50)",
    Icon = "arrow-left-circle",
    Callback = function()
        local hrp = getRootPart()
        if not hrp then return end
        local backward = -hrp.CFrame.LookVector * 50
        teleportTo(hrp.CFrame + backward)
        WindUI:Notify({
            Title = "Moved Backward",
            Content = "-50 studs",
            Icon = "arrow-left",
        })
    end
})

-- ========================================
-- ðŸ‘ï¸ VISUALS TAB
-- ========================================
local VisualsTab = VisualsSection:Tab({
    Title = "Visuals",
    Icon = "eye",
    IconColor = Colors.Purple,
    IconShape = "Square",
})

VisualsTab:Section({
    Title = "ðŸ” ESP Settings",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

VisualsTab:Toggle({
    Title = "Player ESP",
    Desc = "See all players through walls with highlights",
    Callback = function(state)
        toggleESP(state)
        WindUI:Notify({
            Title = "Player ESP",
            Content = state and "Enabled" or "Disabled",
            Icon = state and "eye" or "eye-off",
        })
    end
})

VisualsTab:Space()

VisualsTab:Section({
    Title = "ðŸ“· Camera Settings",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

VisualsTab:Input({
    Title = "Field of View (FOV)",
    Value = "70",
    InputIcon = "maximize",
    Type = "Input",
    Placeholder = "70 - 120",
    Callback = function(text)
        local num = tonumber(text)
        if num and num >= 70 and num <= 120 then
            setFOV(num)
            WindUI:Notify({
                Title = "FOV Changed",
                Content = "Set to " .. num,
                Icon = "check",
            })
        end
    end,
})

-- ========================================
-- âš¡ PERFORMANCE TAB
-- ========================================
local PerformanceTab = PerformanceSection:Tab({
    Title = "Performance",
    Icon = "gauge",
    IconColor = Colors.Red,
    IconShape = "Square",
})

PerformanceTab:Section({
    Title = "ðŸŽ® Graphics Optimization",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

local GraphicsGroup = PerformanceTab:Group({})

GraphicsGroup:Toggle({
    Title = "Disable 3D Rendering",
    Desc = "Show only UI for maximum FPS boost",
    Callback = function(val)
        toggle3DRendering(not val)
    end
})

GraphicsGroup:Space()

GraphicsGroup:Toggle({
    Title = "Low Quality Mode",
    Desc = "Reduce graphics quality for better performance",
    Callback = function(val)
        setLowQuality(val)
    end
})

PerformanceTab:Space()

local EffectsGroup = PerformanceTab:Group({})

EffectsGroup:Toggle({
    Title = "Performance Mode",
    Desc = "Disable all particles and visual effects",
    Callback = function(val)
        enablePerformanceMode(val)
    end
})

EffectsGroup:Space()

EffectsGroup:Toggle({
    Title = "Reduce Draw Distance",
    Desc = "Lower render distance for better FPS",
    Callback = function(val)
        reduceDrawDistance(val)
    end
})

PerformanceTab:Space()

PerformanceTab:Section({
    Title = "ðŸš€ Teleport Settings",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

local TpSettingsGroup = PerformanceTab:Group({})

TpSettingsGroup:Dropdown({
    Title = "Teleport Method",
    Desc = "Choose between instant or smooth teleport",
    Values = {"Instant", "Tween"},
    Value = "Instant",
    Callback = function(option)
        teleportMethod = option
        WindUI:Notify({
            Title = "Teleport Method",
            Content = "Set to " .. option,
            Icon = "settings",
        })
    end
})

TpSettingsGroup:Space()

TpSettingsGroup:Input({
    Title = "Tween Speed",
    Value = "50",
    InputIcon = "zap",
    Type = "Input",
    Placeholder = "10 - 200 (studs/second)",
    Callback = function(text)
        local num = tonumber(text)
        if num and num >= 10 and num <= 200 then
            tweenSpeed = num
            WindUI:Notify({
                Title = "Tween Speed",
                Content = "Set to " .. num .. " studs/s",
                Icon = "check",
            })
        end
    end,
})

-- ========================================
-- ðŸ”§ MISC TAB
-- ========================================
local MiscTab = MiscSection:Tab({
    Title = "Utilities",
    Icon = "settings",
    IconColor = Colors.Grey,
    IconShape = "Square",
})

MiscTab:Section({
    Title = "ðŸŒ Server Actions",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

local ServerGroup = MiscTab:Group({})

ServerGroup:Button({
    Title = "Rejoin Server",
    Icon = "refresh-cw",
    Justify = "Center",
    Color = Colors.Blue,
    Callback = function()
        local TeleportService = game:GetService("TeleportService")
        TeleportService:Teleport(game.PlaceId, LocalPlayer)
    end
})

ServerGroup:Space()

ServerGroup:Button({
    Title = "Server Hop",
    Icon = "shuffle",
    Justify = "Center",
    Color = Colors.Green,
    Callback = function()
        local TeleportService = game:GetService("TeleportService")
        local HttpService = game:GetService("HttpService")
        
        local success, servers = pcall(function()
            return HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"))
        end)
        
        if success and servers.data then
            for _, server in pairs(servers.data) do
                if server.playing < server.maxPlayers and server.id ~= game.JobId then
                    TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id, LocalPlayer)
                    WindUI:Notify({
                        Title = "Server Hop",
                        Content = "Joining new server...",
                        Icon = "check",
                    })
                    break
                end
            end
        end
    end
})

MiscTab:Space()

MiscTab:Section({
    Title = "ðŸ“Š Information & Stats",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

-- Show Server Stats button
MiscTab:Button({
    Title = "Show Server Stats",
    Icon = "bar-chart",
    Justify = "Center",
    Color = Colors.Purple,
    Callback = function()
        local stats = string.format(
            "Players: %d/%d\nPing: %dms\nFPS: %d",
            #Players:GetPlayers(),
            Players.MaxPlayers,
            math.floor(LocalPlayer:GetNetworkPing() * 1000),
            math.floor(1 / RunService.Heartbeat:Wait())
        )
        WindUI:Notify({
            Title = "Server Stats",
            Content = stats,
            Icon = "info",
        })
    end,
})

MiscTab:Space()

MiscTab:Toggle({
    Title = "Auto Server Stats",
    Default = false,
    Callback = function(state)
        if state then
            MiscTab._elapsed = 0
            MiscTab.AutoStatsConn = game:GetService("RunService").Heartbeat:Connect(function(step)
                MiscTab._elapsed = MiscTab._elapsed + step
                if MiscTab._elapsed >= 3 then
                    MiscTab._elapsed = 0
                    local stats = string.format(
                        "Players: %d/%d\nPing: %dms\nFPS: %d",
                        #Players:GetPlayers(),
                        Players.MaxPlayers,
                        math.floor(LocalPlayer:GetNetworkPing() * 1000),
                        math.floor(1 / RunService.Heartbeat:Wait())
                    )
                    WindUI:Notify({
                        Title = "Server Stats",
                        Content = stats,
                        Icon = "info",
                    })
                end
            end)
        else
            if MiscTab.AutoStatsConn then
                MiscTab.AutoStatsConn:Disconnect()
                MiscTab.AutoStatsConn = nil
            end
        end
    end,
})

MiscTab:Space()

MiscTab:Section({
    Title = "ðŸ“‹ Copy to Clipboard",
    TextSize = 18,
    FontWeight = Enum.FontWeight.SemiBold,
})

local ClipboardGroup = MiscTab:Group({})

ClipboardGroup:Button({
    Title = "Copy Game ID",
    Icon = "copy",
    Callback = function()
        setclipboard(tostring(game.PlaceId))
        WindUI:Notify({
            Title = "Copied!",
            Content = "Game ID: " .. game.PlaceId,
            Icon = "check",
        })
    end
})

ClipboardGroup:Space()

ClipboardGroup:Button({
    Title = "Copy Job ID",
    Icon = "hash",
    Callback = function()
        setclipboard(tostring(game.JobId))
        WindUI:Notify({
            Title = "Copied!",
            Content = "Job ID copied to clipboard",
            Icon = "check",
        })
    end
})

ClipboardGroup:Space()

ClipboardGroup:Button({
    Title = "Copy Current Position",
    Icon = "map-pin",
    Callback = function()
        local hrp = getRootPart()
        if hrp then
            local pos = hrp.Position
            local locationString = string.format("CFrame.new(%.2f, %.2f, %.2f)", pos.X, pos.Y, pos.Z)
            setclipboard(locationString)
            WindUI:Notify({
                Title = "Position Copied",
                Content = string.format("X: %.0f, Y: %.0f, Z: %.0f", pos.X, pos.Y, pos.Z),
                Icon = "map-pin",
            })
        end
    end
})

-- ========================================
-- ðŸŽ¯ EVENT HANDLERS
-- ========================================

-- Infinite Jump Handler
UserInputService.JumpRequest:Connect(function()
    if infiniteJumpEnabled then
        local humanoid = getHumanoid()
        if humanoid then
            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end
end)

-- Character Respawn Handler
LocalPlayer.CharacterAdded:Connect(function(char)
    task.wait(0.5)
    
    if noClipEnabled then
        toggleNoClip(false)
        task.wait(0.1)
        toggleNoClip(true)
    end
end)

-- ESP Player Added Handler
Players.PlayerAdded:Connect(function(player)
    if espEnabled then
        player.CharacterAdded:Connect(function()
            wait(0.5)
            if espEnabled then
                createESP(player)
            end
        end)
    end
end)

-- Cleanup on Close
if game.BindToClose then
    pcall(function()
        game:BindToClose(function()
            toggleNoClip(false)
            toggleESP(false)
            stopLoopTp()
            if freecamEnabled then
                stopFreecam()
            end
        end)
    end)
end
